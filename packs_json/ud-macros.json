{"_id":"b1C1YU1LW9v5uoIJ","name":"Generate Monster","type":"script","author":"5yw8weSeFyZ1vzKR","img":"icons/svg/dice-target.svg","scope":"global","command":"new Dialog(\n  {\n    title: \"Create Monster\",\n    content: `\n    <form>\n      <fieldset>\n        <div>\n          <label>\n            Name\n          </label>\n          <input type=\"text\" id=\"Name\" />\n        </div>\n\n        <br />\n\n        <div>\n          <label>\n            What is it known to do? Write a monster move describing what it does\n          </label>\n          <input type=\"text\" id=\"Drive\" />\n        </div>\n\n        <br />\n\n        <div>\n          <label>How does it usually hunt or fight?</label>\n          <select id=\"Fight\" name=\"fight\">\n            <option value=\"horde\">\n              In large groups: horde, d6 damage, 3 HP\n            </option>\n            <option value=\"group\">\n              In small groups, about 2-5: group, d6+1 damage, 6 HP\n            </option>\n            <option value=\"solitary\">\n              All by its lonesome: solitary, d6+2 damage, 12 HP\n            </option>\n          </select>\n        </div>\n\n        <br />\n\n        <div>\n          <label>How big is it?</label>\n          <select id=\"Size\" name=\"size\">\n            <option value=\"tiny\">\n              Smaller than a house cat: tiny, hand, -2 damage\n            </option>\n            <option value=\"small\">Halfling-esque: small, close</option>\n            <option value=\"medium\">About human size: close</option>\n            <option value=\"large\">\n              As big as a cart: large, close, reach, +4 HP, +1 damage\n            </option>\n            <option value=\"huge\">\n              Much larger than a cart: huge, reach, +8 HP, +3 damage\n            </option>\n          </select>\n        </div>\n\n        <br />\n\n        <div>\n          <label>What is its most important defense?</label>\n          <select id=\"Armor\" name=\"armor\">\n            <option value=\"cloth\">Cloth or flesh: 0 armor</option>\n            <option value=\"leather\">Leathers or thick hide: 1 armor</option>\n            <option value=\"mail\">Mail or scales: 2 armor</option>\n            <option value=\"plate\">Plate or bone: 3 armor</option>\n            <option value=\"huge\">\n              Permanent magical protection: 4 armor, magical\n            </option>\n          </select>\n        </div>\n\n        <br />\n\n        <div>\n          <label>What is it known for? (choose all that apply)</label>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"UnrelentingStrength\"\n              name=\"Unrelenting Strength\"\n              value=\"UnrelentingStrength\"\n            />\n            <label for=\"UnrelentingStrength\">\n              Unrelenting strength: +2 damage, forceful\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"SkillInOffense\"\n              name=\"Skill In Offense\"\n              value=\"skillInOffense\"\n            />\n            <label for=\"SkillInOffense\">\n              Skill in offense: roll damage twice and take the better roll\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"SkillInDefense\"\n              name=\"Skill In Defense\"\n              value=\"skillInDefense\"\n            />\n            <label for=\"SkillInDefense\">Skill in defense: +1 armor</label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"DeftStrikes\"\n              name=\"Deft Strikes\"\n              value=\"deftStrikes\"\n            />\n            <label for=\"DeftStrikes\">Deft strikes: +1 piercing</label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"UncannyEndurance\"\n              name=\"Uncanny Endurance\"\n              value=\"uncannyEndurance\"\n            />\n            <label for=\"UncannyEndurance\">Uncanny endurance: +4 HP</label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"DeceitAndTrickery\"\n              name=\"Deceit and Trickery\"\n              value=\"deceitAndTrickery\"\n            />\n            <label for=\"DeceitAndTrickery\">\n              Deceit and trickery: stealthy, write a move about dirty tricks\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Adaptation\"\n              name=\"Adaptation\"\n              value=\"adaptation\"\n            />\n            <label for=\"Adaptation\">\n              A useful adaptation like being amphibious or having wings: add a\n              special quality for the adaptation\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"FavorOfTheGods\"\n              name=\"Favor of the Gods\"\n              value=\"favorOfTheGods\"\n            />\n            <label for=\"FavorOfTheGods\">\n              The favor of the gods: divine, +2 damage or +2 HP or both (your\n              call)\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"SpellsAndMagic\"\n              name=\"Spells and Magic\"\n              value=\"spellsAndMagic\"\n            />\n            <label for=\"SpellsAndMagic\">\n              Spells and magic: magical, write a move about its spells\n            </label>\n          </div>\n        </div>\n\n        <br />\n\n        <div>\n          <div>\n            <label>\n            What is its most common form of attack?\n            </label>\n            <input type=\"text\" id=\"FormOfAttack\" />\n          </div>\n\n          <br />\n\n          <div>\n            <label>Describe its armaments</label>\n            <select id=\"Armaments\" name=\"armaments\">\n              <option value=\"vicious\">\n                Its armaments are vicious and obvious: +2 damage\n              </option>\n              <option value=\"reach\">\n                It lets the monster keep others at bay: reach\n              </option>\n              <option value=\"weak\">\n                Its armaments are small and weak: -1 damage\n              </option>\n              <option value=\"slice\">\n                Its armaments can slice or pierce metal: messy, +1 piercing or\n                +3 piercing if it can just tear metal apart\n              </option>\n              <option value=\"piercing\">\n                Armor doesn't help with the damage it deals (due to magic, size,\n                etc.): ignores Armor\n              </option>\n              <option value=\"ranged\">\n                It usually attacks at range (with arrows, spells, or other\n                projectiles): near or far or both (your call)\n              </option>\n            </select>\n          </div>\n        </div>\n\n        <br />\n\n        <div>\n          <label>Which of these describe it? (Choose all that apply)</label>\n\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Devious\"\n              name=\"Devious\"\n              value=\"devious\"\n            />\n            <label for=\"Devious\">\n              It isn't dangerous because of the wounds it inflicts, but for\n              other reasons: devious, -1 damage, write a move about why it's\n              dangerous\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Organized\"\n              name=\"Organized\"\n              value=\"organized\"\n            />\n            <label for=\"Organized\">\n              It organizes into larger groups that it can call on for support:\n              organized, write a move about calling on others for help\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Intelligent\"\n              name=\"Intelligent\"\n              value=\"intelligent\"\n            />\n            <label for=\"Intelligent\">\n              It's as smart as a human or thereabouts: intelligent\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Cautious\"\n              name=\"Cautious\"\n              value=\"cautious\"\n            />\n            <label for=\"Cautious\">\n              It actively defends itself with a shield or similar: cautious, +1\n              armor\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Hoarder\"\n              name=\"Hoarder\"\n              value=\"hoarder\"\n            />\n            <label for=\"Hoarder\">\n              It collects trinkets that humans would consider valuable (gold,\n              gems, secrets): hoarder\n            </label>\n          </div>\n          <div>\n            <input type=\"checkbox\" id=\"Planar\" name=\"Planar\" value=\"planar\" />\n            <label for=\"Planar\">\n              It's from beyond this world: planar, write a move about using its\n              otherworldly knowledge and power\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"BeyondBiology\"\n              name=\"Beyond Biology\"\n              value=\"beyondBiology\"\n            />\n            <label for=\"BeyondBiology\">\n              It's kept alive by something beyond simple biology: +4 HP\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Construct\"\n              name=\"Construct\"\n              value=\"construct\"\n            />\n            <label for=\"Construct\">\n              It was made by someone: construct, give it a special quality or\n              two about its construction or purpose\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Terrifying\"\n              name=\"Terrifying\"\n              value=\"terrifying\"\n            />\n            <label for=\"Terrifying\">\n              Its appearance is disturbing, terrible, or horrible: terrifying,\n              write a special quality about why it's so horrendous\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Amorphous\"\n              name=\"Amorphous\"\n              value=\"amorphous\"\n            />\n            <label for=\"Amorphous\">\n              It doesn't have organs or discernible anatomy: amorphous, +1\n              armor, +3 HP\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"Ancient\"\n              name=\"Ancient\"\n              value=\"ancient\"\n            />\n            <label for=\"Ancient\">\n              It (or its species) is ancient--older than man, elves, and\n              dwarves: +1 damage\n            </label>\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              id=\"AbhorsViolence\"\n              name=\"Abhors Violence\"\n              value=\"abhorsViolence\"\n            />\n            <label for=\"AbhorsViolence\">\n              It abhors violence: roll damage twice and take the worst result\n            </label>\n          </div>\n        </div>\n      </fieldset>\n    </form>\n  `,\n    buttons: {\n      generate: {\n        label: `Generate Monster`,\n        callback: (html) => {\n          const name = html.find('[id=\"Name\"]')[0].value\n\n          const drive = html.find('[id=\"Drive\"]')[0].value\n\n          const fight = html.find('[id=\"Fight\"]')[0].value\n\n          const size = html.find('[id=\"Size\"]')[0].value\n\n          const armorType = html.find('[id=\"Armor\"]')[0].value\n\n          const unrelentingStrength = html.find('[id=\"UnrelentingStrength\"]')[0].checked\n          const skillInOffense = html.find('[id=\"SkillInOffense\"]')[0].checked\n          const skillInDefense = html.find('[id=\"SkillInDefense\"]')[0].checked\n          const deftStrikes = html.find('[id=\"DeftStrikes\"]')[0].checked\n          const uncannyEndurance = html.find('[id=\"UncannyEndurance\"]')[0].checked\n          const deceitAndTrickery = html.find('[id=\"DeceitAndTrickery\"]')[0].checked\n          const adaptation = html.find('[id=\"Adaptation\"]')[0].checked\n          const favorOfTheGods = html.find('[id=\"FavorOfTheGods\"]')[0].checked\n          const spellsAndMagic = html.find('[id=\"SpellsAndMagic\"]')[0].checked\n\n          const formOfAttack = html.find('[id=\"FormOfAttack\"]')[0].value\n          const armaments = html.find('[id=\"Armaments\"]')[0].value\n\n          const devious = html.find('[id=\"Devious\"]')[0].checked\n          const organized = html.find('[id=\"Organized\"]')[0].checked\n          const intelligent = html.find('[id=\"Intelligent\"]')[0].checked\n          const cautious = html.find('[id=\"Cautious\"]')[0].checked\n          const hoarder = html.find('[id=\"Hoarder\"]')[0].checked\n          const planar = html.find('[id=\"Planar\"]')[0].checked\n          const beyondBiology = html.find('[id=\"BeyondBiology\"]')[0].checked\n          const construct = html.find('[id=\"Construct\"]')[0].checked\n          const terrifying = html.find('[id=\"Terrifying\"]')[0].checked\n          const amorphous = html.find('[id=\"Amorphous\"]')[0].checked\n          const ancient = html.find('[id=\"Ancient\"]')[0].checked\n          const abhorsViolence = html.find('[id=\"AbhorsViolence\"]')[0].checked\n\n          console.log({\n            name,\n            drive,\n            fight,\n            size,\n            armorType,\n            unrelentingStrength,\n            skillInOffense,\n            skillInDefense,\n            deftStrikes,\n            uncannyEndurance,\n            deceitAndTrickery,\n            adaptation,\n            favorOfTheGods,\n            spellsAndMagic,\n            formOfAttack,\n            armaments,\n            devious,\n            organized,\n            intelligent,\n            cautious,\n            hoarder,\n            planar,\n            beyondBiology,\n            construct,\n            terrifying,\n            amorphous,\n            ancient,\n            abhorsViolence,\n          })\n\n          // Also remember to include drive and formOfAttack\n          let damageBonus = 0\n          let hitPoints = 0\n          let armor = 0\n          let tags = []\n          let additionalNotes = []\n\n          if (fight === \"horde\") {\n            hitPoints += 3\n          } else if (fight === \"group\") {\n            damageBonus += 1\n            hitPoints += 6\n          } else if (fight === \"solitary\") {\n            damageBonus += 2\n            hitPoints += 12\n          }\n\n          if (size === \"tiny\") {\n            tags.push(\"tiny\", \"hand\")\n            damageBonus -= 2\n          } else if (size === \"small\") {\n            tags.push(\"small\", \"close\")\n          } else if (size === \"medium\") {\n            tags.push(\"close\")\n          } else if (size === \"large\") {\n            tags.push(\"large\", \"close\", \"reach\")\n            hitPoints += 4\n            damageBonus += 1\n          } else if (size === \"huge\") {\n            tags.push(\"huge\", \"reach\")\n            hitPoints += 8\n            damageBonus += 3\n          }\n\n          if (armorType === \"leather\") {\n            armor += 1\n          } else if (armorType === \"mail\") {\n            armor += 2\n          } else if (armorType === \"plate\") {\n            armor += 3\n          } else if (armorType === \"huge\") {\n            armor += 4\n          }\n\n          if (unrelentingStrength) {\n            tags.push(\"forceful\")\n            damageBonus += 2\n          }\n          if (skillInOffense) {\n            additionalNotes.push(\"Roll damage twice and take the better roll\")\n          }\n          if (skillInDefense) {\n            armor += 1\n          }\n          if (deftStrikes) {\n            additionalNotes.push(\"+1 piercing\")\n          }\n          if (uncannyEndurance) {\n            hitPoints += 4\n          }\n          if (deceitAndTrickery) {\n            additionalNotes.push(\"Stealthy, write a move about dirty tricks\")\n          }\n          if (adaptation) {\n            additionalNotes.push(\n              \"Add a special quality for the adaptation (like being amphibious or having wings)\",\n            )\n          }\n          if (favorOfTheGods) {\n            tags.push(\"divine\")\n            additionalNotes.push(\n              \"Add +2 damage or +2 hp or both (your choice) from favor of the gods\",\n            )\n          }\n          if (spellsAndMagic) {\n            additionalNotes.push(\"Magical, write a move about its spells\")\n          }\n\n          if (armaments === \"vicious\") {\n            damageBonus += 2\n            additionalNotes.push(\"Its armaments are vicious and obvious\")\n          } else if (armaments === \"reach\") {\n            tags.push(\"reach\")\n          } else if (armaments === \"weak\") {\n            damageBonus -= 1\n          } else if (armaments === \"slice\") {\n            tags.push(\"messy\")\n            additionalNotes.push(\n              \"Its armaments can slice or pierce metal. Add +1 piercing or +3 piercing \" +\n                \"if it can just tear metal apart\",\n            )\n          } else if (armaments === \"piercing\") {\n            additionalNotes.push(\"Ignores Armor\")\n          } else if (armaments === \"ranged\") {\n            additionalNotes.push(\n              \"It usually attacks at range (with arrows, spells, or other \" +\n                \"projectiles): near or far or both (your call)\",\n            )\n          }\n\n          // Additional traits\n          if (devious) {\n            tags.push(\"devious\")\n            damageBonus -= 1\n            additionalNotes.push(\"Write a move about why it's dangerous\")\n          }\n          if (organized) {\n            additionalNotes.push(\"Write a move about calling on others for help\")\n          }\n          if (intelligent) {\n            tags.push(\"intelligent\")\n          }\n          if (cautious) {\n            tags.push(\"cautious\")\n            armor += 1\n          }\n          if (hoarder) {\n            tags.push(\"hoarder\")\n          }\n          if (planar) {\n            tags.push(\"planar\")\n            additionalNotes.push(\"Write a move about using its otherworldly knowledge and power\")\n          }\n          if (beyondBiology) {\n            additionalNotes.push(\"It's kept alive by something beyond simple biology\")\n            hitPoints += 4\n          }\n          if (construct) {\n            tags.push(\"construct\")\n            additionalNotes.push(\n              \"Give it a special quality or two about its construction or purpose\",\n            )\n          }\n          if (terrifying) {\n            tags.push(\"terrifying\")\n            additionalNotes.push(\"Write a special quality about why it's so horrendous\")\n          }\n          if (amorphous) {\n            tags.push(\"amorphous\")\n            additionalNotes.push(\"It doesn't have organs or discernible anatomy\")\n            armor += 1\n            hitPoints += 3\n          }\n          if (ancient) {\n            additionalNotes.push(\n              \"It (or its species) is ancient--older than man, elves, and dwarves\",\n            )\n            damageBonus += 1\n          }\n          if (abhorsViolence) {\n            additionalNotes.push(\"Roll damage twice and take the worst result\")\n          }\n\n          console.log({ additionalNotes })\n\n          new Dialog({\n            title: \"Monster Details\",\n            content: `\n              <h1>${name}</h1>\n              <p>Drive: ${drive}</p>\n              <p>Form of Attack: ${formOfAttack}</p>\n              <p>HP: ${hitPoints}</p>\n              <p>Damage: 1D6${\n                damageBonus > 0 ? `+${damageBonus}` : damageBonus < 0 ? `-${damageBonus}` : \"\"\n              }</p>\n              <p>Armor: ${armor}</p>\n              <p>Tags: ${tags.join(\", \")}</p>\n              <p>Additional notes:\n                <ul>${additionalNotes.map((note) => `<li>${note}</li>`).join(\"\")}</ul>\n              </p>\n            `,\n            buttons: {\n              done: {\n                label: `Copy & Close`,\n                callback: async () => {\n                  await navigator.clipboard.writeText(\n                    `${name}:\nDrive: ${drive}\nForm of Attack: ${formOfAttack}\nHP: ${hitPoints}\nDamage: 1D6${damageBonus > 0 ? `+${damageBonus}` : damageBonus < 0 ? `-${damageBonus}` : \"\"}\nArmor: ${armor}\nTags: ${tags.join(\", \")}\nAdditional notes:\n${additionalNotes.map((note) => `* ${note}`).join(\"\\n\")}`,\n                  )\n                  ui.notifications.info(\"Copied monster details to clipboard\")\n                },\n              },\n            },\n          }).render(true)\n        },\n      },\n    },\n    default: \"generate\",\n    close: () => {\n      return\n    },\n  },\n  {\n    width: 800,\n    height: 800,\n  },\n).render(true)","folder":null,"sort":0,"permission":{"default":0,"5yw8weSeFyZ1vzKR":3},"flags":{}}
